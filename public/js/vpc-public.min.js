var VPC_CONFIG=function(b,g){b(document).ready(function(){function g(){var a=setInterval(function(){(b(".vpc-options input:checked").length||b(".vpc-options select option:selected").length)&&(b("#vpc-preview img").length||b(".vpc-preview img").length)&&(clearInterval(a),b("#vpc-preview img, .vpc-preview img").oImageLoad(function(){var a=0,c=setInterval(function(){a+=.5;if(b(".vpc-selected-icon img").length&&0!==b(".vpc-selected-icon img").attr("src").length||3==a)clearInterval(c),b("#vpc-loader-container").addClass("fadeOut")},
500)}));b(".vpc-options input:checked").length||b(".vpc-options select option:selected").length||(clearInterval(a),b("#vpc-loader-container").addClass("fadeOut"));!b(".vpc-options input:checked").length&&!b(".vpc-options select option:selected").length||b("#vpc-preview img").length||b(".vpc-preview img").length||(clearInterval(a),b("#vpc-loader-container").addClass("fadeOut"))},200)}function h(a){"component"==a.result.scope&&b("#vpc-container div.vpc-component[data-component_id="+a.result.apply_on+
"]").not("[style*='display: none;']").length?(b("#vpc-container div.vpc-component[data-component_id="+a.result.apply_on+"]").hide(),b("#vpc-container div.vpc-component[data-component_id="+a.result.apply_on+"]").find("input:checked").removeAttr("checked").trigger("change")):"option"==a.result.scope&&b(".vpc-options div[data-oid='"+a.result.apply_on+"']").not("[style*='display: none;']").length&&(b(".vpc-options div[data-oid='"+a.result.apply_on+"']").hide(),b(".vpc-options div[data-oid='"+a.result.apply_on+
"'] input:checked").removeAttr("checked").trigger("change"),b(".vpc-options div[data-oid='"+a.result.apply_on+"']").parents(".vpc-options").find(".vpc-single-option-wrap").not("[style*='display: none;']").find("input").first().prop("checked",!0).trigger("change"));wp.hooks.doAction("vpc.hide_options_or_component",a)}function k(a){"component"==a.result.scope&&b("#vpc-container div.vpc-component[data-component_id='"+a.result.apply_on+"'][style*='display: none;']").length?(b("#vpc-container div.vpc-component[data-component_id="+
a.result.apply_on+"]").show(),b("#vpc-container div.vpc-component[data-component_id="+a.result.apply_on+"]").find(".vpc-options input[data-default]").length?b("#vpc-container div.vpc-component[data-component_id="+a.result.apply_on+"]").find(".vpc-options input[data-default]").click():b("#vpc-container div.vpc-component[data-component_id="+a.result.apply_on+"]").find(".vpc-options input").first().click()):"option"==a.result.scope&&b(".vpc-options div[data-oid='"+a.result.apply_on+"'][style*='display: none;']").length&&
(b(".vpc-options div[data-oid='"+a.result.apply_on+"']").show(),b(".vpc-options div[data-oid='"+a.result.apply_on+"']").parents(".vpc-options").find(".vpc-single-option-wrap").not("[style*='display: none;']").find("input:checked").length||b(".vpc-options div[data-oid='"+a.result.apply_on+"']").parents(".vpc-options").find(".vpc-single-option-wrap").not("[style*='display: none;']").find("input").first().prop("checked",!0).trigger("change"));wp.hooks.doAction("vpc.show_options_or_component",a)}function l(a){"option"==
a.result.scope&&b(".vpc-options div[data-oid='"+a.result.apply_on+"']").length&&(b(".vpc-options div[data-oid='"+a.result.apply_on+"']").show(),b(".vpc-options div[data-oid='"+a.result.apply_on+"']>input").prop("checked",!0).trigger("change"));wp.hooks.doAction("vpc.select_options_or_component",a)}function m(a){"option"==a.result.scope&&b(".vpc-options div[data-oid='"+a.result.apply_on+"']").not("[style*='display: none;']").length&&b(".vpc-options div[data-oid='"+a.result.apply_on+"']>input").prop("checked",
!1).trigger("change");wp.hooks.doAction("vpc.hide_options_or_component",a)}"undefined"!=typeof vpc&&(accounting.settings={currency:{symbol:vpc.currency,format:vpc.price_format,decimal:vpc.decimal_separator,thousand:vpc.thousand_separator,precision:vpc.decimals},number:{precision:vpc.decimals,thousand:vpc.thousand_separator,decimal:vpc.decimal_separator}});window.vpc_oriontip=function(){b("[data-oriontip]").oriontip()};b("#vpc-container").append('<div id="vpc_preview_wrapper" class="" style="position: absolute;"></div>');
setTimeout(function(){g()},100);window.vpc_build_preview=function(){if("undefined"!=typeof vpc){b("#vpc-preview").html("");if(b("#vpc-add-to-cart").data("price"))var a=","==vpc.decimal_separator?parseFloat(b("#vpc-add-to-cart").data("price").toString().replace(",",".")):parseFloat(b("#vpc-add-to-cart").data("price"));var d=[];a||(a=0);var c=wp.hooks.applyFilters("vpc.items_selected",vpc.vpc_selected_items_selector);wp.hooks.applyFilters("vpc.default_preview_builder_process",!0)?(b(c).each(function(){var c=
b(this).data("img"),e=b(this).data("price");e&&(a+=parseFloat(e));c&&(b("#vpc-preview").append("<img src='"+c+"'>"),d.push(c))}),a=wp.hooks.applyFilters("vpc.total_price",a),b("#vpc-price").html(accounting.formatMoney(a))):wp.hooks.doAction("vpc.default_preview_builder_process",c)}};window.vpc_apply_rules=function(a){if("undefined"!=typeof vpc){"undefined"==typeof a&&(a=vpc.vpc_selected_items_selector);var d=!1;b(a).each(function(a,f){a=b(this).attr("id");a=vpc.wvpc_conditional_rules[a];if("undefined"==
typeof a)return!0;b.each(a,function(a,c){b.each(c,function(a,c){var e=!0;b.each(c.rules,function(a,d){"undefined"==typeof c.conditions_relationship&&(c.conditions_relationship="and");(a="checked"==b(".vpc-options input[data-oid='"+d.option+"']").attr("checked"))||(a=b(".vpc-options input[data-oid='"+d.option+"']").is(":checked"));a=wp.hooks.applyFilters("vpc.is_option_selected",a,d.option);if("or"==c.conditions_relationship&&("on_selection"==d.trigger&&a||"on_deselection"==d.trigger&&!a))return e=
!0,!1;if("or"==c.conditions_relationship)e=!1;else if("and"==c.conditions_relationship&&("on_selection"==d.trigger&&!a||"on_deselection"==d.trigger&&a))return e=!1});e?"hide"==c.result.action?(d=!0,h(c)):"show"==c.result.action?(d=!0,k(c)):"select"==c.result.action&&(d=!0,l(c)):"on"==c.apply_reverse&&("hide"==c.result.action?(d=!0,k(c)):"show"==c.result.action&&b("#"+c.result.apply_on).not("[style*='display: none;']").length?(d=!0,h(c)):"select"==c.result.action&&(d=!0,m(c)))})})});d&&vpc_build_preview()}};
"undefined"!=typeof vpc&&b(vpc.reverse_triggers).each(function(a,b){vpc_apply_rules("#"+b)});window.vpc_load_options=function(){"undefined"!==typeof vpc&&(console.log(vpc.vpc_selected_items_selector),b(vpc.vpc_selected_items_selector).each(function(){b(this).trigger("change")}))};b(document).on("click","#vpc-qty-container .plus, #vpc-qty-container .minus",function(){var a=b("#vpc-qty"),d=parseFloat(a.val()),c=parseFloat(a.attr("max")),f=parseFloat(a.attr("min")),e=a.attr("step");d&&""!==d&&"NaN"!==
d||(d=0);if(""===c||"NaN"===c)c="";if(""===f||"NaN"===f)f=0;if("any"===e||""===e||void 0===e||"NaN"===parseFloat(e))e=1;b(this).is(".plus")?c&&(c==d||d>c)?a.val(c):a.val(d+parseFloat(e)):f&&(f==d||d<f)?a.val(f):0<d&&a.val(d-parseFloat(e))});b(document).on("click","#vpc-add-to-cart",function(){var a=b(this).data("pid"),d=[];b("#vpc-container input:checked").each(function(a){b(this).data("product")&&d.push(b(this).data("product"))});var c=b("#vpc-qty").val(),f=b("#vpc-container").find(":input").serializeJSON(),
e={};e=wp.hooks.applyFilters("vpc.custom_vars",e);wp.hooks.applyFilters("vpc_proceed_add_to_cart",!0)?b.post(ajax_object.ajax_url,{action:"add_vpc_configuration_to_cart",product_id:a,alt_products:d,quantity:c,recap:f,custom_vars:e},function(a){b("#debug").html(a);switch(vpc.action_after_add_to_cart){case "refresh":setTimeout(function(){window.location.reload(!0)},3E3);break;case "redirect":window.location.href=vpc.cart_url;break;case "redirect_to_product_page":window.location.href=vpc.current_product_page}wp.hooks.doAction("vpc.after_add_to_cart",
a)}):wp.hooks.doAction("vpc_proceed_add_to_cart",e)});b(".single_variation_wrap").on("show_variation",function(a,d){if(a=b("input[name='variation_id']").val())b(".vpc-configure-button").hide(),b(".vpc-configure-button[data-id='"+a+"']").show()});b("#vpc-ajax-container").length&&b.post(ajax_object.ajax_url,{action:"get_vpc_editor",vpc},function(a){b("#vpc-ajax-container").removeClass("vpc-loading").html(a);vpc_load_options();wp.hooks.doAction("vpc.ajax_loading_complete")});b(document).on("click",".cart .vpc-configure-button",
function(a){a.preventDefault();(a=b("[name='variation_id']").val())||(a=b('[name="add-to-cart"]').val());var d=b(this).parent().find("input[name='quantity']").val();b.post(ajax_object.ajax_url,{action:"get_vpc_product_qty",prod_id:a,qty:d},function(a){window.location=a})})});return g}(jQuery,VPC_CONFIG);